<html>
  <head>
    <title>Geolocated content with Argon + A-Frame</title>
  	<meta name="keywords" content="{{ site.keywords }}, geolocation, geospatial ar">
    <meta name="description" content="Geolocation Argon + A-Frame">
    <!-- Origin Trial Token, feature = WebVR, origin = https://argonjs.io, expires = 2017-06-06 -->
    <meta http-equiv="origin-trial" data-feature="WebVR" data-expires="2017-06-06" content="ArfXzMSluPfAfoVDD+ne9oWykUyDeLFD/z4/0uRCdZ1491aSrytWyj7gnGhwK1/Tzg/D+UOvNgD2+L9PWqF5XwwAAABceyJvcmlnaW4iOiJodHRwczovL2FyZ29uanMuaW86NDQzIiwiZmVhdHVyZSI6IldlYlZSIiwiZXhwaXJ5IjoxNDk2NzcxODA0LCJpc1N1YmRvbWFpbiI6dHJ1ZX0=">
    <script src="../../../node_modules/@argonjs/argon/dist/argon.js"></script>
    <script src="{{ site.argonaframejs }}"></script>
    <script src="../../../examples/resources/js/aframe-look-at-component.js"></script>
    <link rel="stylesheet" href="../resources/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="../../../examples/resources/style.css">
  </head>
  <body>
    <script>
      AFRAME.registerComponent('showdistance', {
        schema: { 
          default: ""
        },

        init: function () {
            this.text = "";
        },

        update: function () {
          this.text = this.data;
        },

        tick: function (t) {
          var object3D = this.el.parentEl.parentEl.object3D;
          var camera = this.el.sceneEl.camera;
          if (!camera) {return;}

          var cameraPos = camera.getWorldPosition();
          var thisPos = object3D.getWorldPosition();
          var distance = Math.round(thisPos.distanceTo(cameraPos));

          var cssDiv = this.el.getObject3D('div');
          var msg = this.text + distance + " meters away";
          cssDiv.elements[0].innerHTML = msg;
          cssDiv.elements[1].innerHTML = msg;
        }
      });
    </script>
    <div hidden>    
      <div id="gtdiv" class="label">Georgia Tech</div>
      <div id="londondiv" class="label">Tower of London</div>
      <div id="tokyodiv" class="label">Tokyo</div>
      <div id="sydneydiv" class="label">Sydney Opera House</div>
      <div id="londonpin" class="pin"><i class="fa fa-map-marker" aria-hidden="true"></i></div>
      <div id="tokyopin" class="pin"><i class="fa fa-map-marker" aria-hidden="true"></i></div>
      <div id="sydneypin" class="pin"><i class="fa fa-map-marker" aria-hidden="true"></i></div>
    </div>
    <ar-scene>
      <a-assets>
        <img id="buzzpin" src="../resources/textures/buzz-pin.png">
      </a-assets>
      <ar-geopose id="GT" lla="-84.394539 33.772501" userotation="false"> 
         <a-entity fixedsize="20" billboard>
           <a-plane rotation="0 0 0" width="2.9" height="4" src="#buzzpin" transparent="true" ></a-plane>
           <a-entity css-object="div: #gtdiv" scale="0.02 0.02 0.02" position="0 4 0" showdistance="Tech Tower @ Georgia Tech<br>Atlanta, GA, USA<br>It is "></a-entity>
        </a-entity>
      </ar-geopose>
      <ar-geopose id="London" lla="-0.076057 51.507953" userotation="false"> 
         <a-entity fixedsize="20" billboard>
           <a-entity css-object="div: #londonpin" scale="0.05 0.05 0.05" position="0 0 0"></a-entity>
           <a-entity css-object="div: #londondiv" scale="0.02 0.02 0.02" position="0 3 0" showdistance="The Tower of London<br>London, England<br>It is "></a-entity>
        </a-entity>
      </ar-geopose>
      <ar-geopose id="Sydney" lla="151.215286 -33.856900" userotation="false"> 
         <a-entity fixedsize="20" billboard>
           <a-entity css-object="div: #sydneypin" scale="0.05 0.05 0.05" position="0 0 0"></a-entity>
           <a-entity css-object="div: #sydneydiv" scale="0.02 0.02 0.02" position="0 3 0" showdistance="Sydney Opera House<br>Sydney, Australia<br>It is "></a-entity>
        </a-entity>
      </ar-geopose>
      <ar-geopose id="Tokyo" lla=" 139.752797 35.685138" userotation="false"> 
         <a-entity fixedsize="20" billboard>
           <a-entity css-object="div: #tokyopin" scale="0.05 0.05 0.05" position="0 0 0"></a-entity>
           <a-entity css-object="div: #tokyodiv" scale="0.02 0.02 0.02" position="0 3 0" showdistance="Imperial Palace<br>Tokyo, Japan<br>It is "></a-entity>
        </a-entity>
      </ar-geopose>
    </ar-scene>
  </body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-63191442-2', 'auto');
  ga('send', 'pageview');
</script>  
</html>